"use strict";(self["webpackChunkstu_project"]=self["webpackChunkstu_project"]||[]).push([[166],{56166:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"bg-box box"}),a("div",{staticClass:"con"},[a("div",{staticClass:"title w100"},[a("div",{staticClass:"left f-l"},[e._v("考试筛选")]),a("div",{staticClass:"right f-r"},[a("a-icon",{attrs:{type:"close-circle"},on:{click:e.close}})],1)]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"l-box"},e._l(e.typeData,(function(t){return a("div",{key:t.id,staticClass:"sub-box"},[a("a-divider",{attrs:{orientation:"left"}},[e._v(e._s(t.name))]),e._l(t.items,(function(t){return a("div",{key:t.name,staticClass:"item-box"},[a("a-checkbox",{model:{value:t.check,callback:function(a){e.$set(t,"check",a)},expression:"sub.check"}},[e._v(e._s(t.name))])],1)}))],2)})),0),a("div",{staticClass:"r-box"},[a("div",{staticClass:"sub-box"},[a("a-divider",{attrs:{orientation:"left"}},[e._v("素养")]),e.attainment.length>0?a("div",{staticClass:"items-box"},e._l(e.attainment,(function(t){return a("div",{key:t.id,staticClass:"item-box"},[a("a-checkbox",{model:{value:t.check,callback:function(a){e.$set(t,"check",a)},expression:"item.check"}},[a("a-tooltip",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(t.libName))]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.libNumber)+" "+e._s(e.CutString(t.libName))+" ")])],1)],1)})),0):a("div",{staticClass:"kong"},[e._v("暂无素养数据")])],1),a("div",{staticClass:"sub-box"},[a("a-divider",{attrs:{orientation:"left"}},[e._v("能力")]),e.ability.length>0?a("div",{staticClass:"items-box"},e._l(e.ability,(function(t){return a("div",{key:t.id,staticClass:"item-box"},[a("a-checkbox",{model:{value:t.check,callback:function(a){e.$set(t,"check",a)},expression:"item.check"}},[a("a-tooltip",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(t.libName))]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.libNumber)+" "+e._s(e.CutString(t.libName))+" ")])],1)],1)})),0):a("div",{staticClass:"kong"},[e._v("暂无能力数据")])],1),a("div",{staticClass:"sub-box"},[a("a-divider",{attrs:{orientation:"left"}},[e._v("知识点")]),e.knowledge.length>0?a("div",{staticClass:"items-box"},e._l(e.knowledge,(function(t){return a("div",{key:t.id,staticClass:"item-box"},[a("a-checkbox",{model:{value:t.check,callback:function(a){e.$set(t,"check",a)},expression:"item.check"}},[a("a-tooltip",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(t.libName))]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.libNumber)+" "+e._s(e.CutString(t.libName))+" ")])],1)],1)})),0):a("div",{staticClass:"kong"},[e._v("暂无知识点数据")])],1)])]),a("div",{staticClass:"footer-box"},[a("a-button",{staticClass:"mr-10",on:{click:e.clear}},[e._v("清空")]),a("a-button",{staticClass:"mr-10",on:{click:e.close}},[e._v("取消")]),a("a-button",{staticClass:"mr-10",attrs:{type:"primary"},on:{click:e.submitData}},[e._v("确定")])],1)])])},s=[],c=a(52650),n=a(68354),r={props:{paperId:[Number]},data(){return{typeData:[{name:"文字",id:0,items:[{name:"文字",check:!1},{name:"重点",check:!1}]},{name:"文件",id:1,items:[{name:"word",check:!1},{name:"ppt",check:!1},{name:"pdf",check:!1},{name:"音频",check:!1},{name:"视频",check:!1},{name:"必办",check:!1}]},{name:"题",id:2,items:[{name:"单选",check:!1},{name:"不定项",check:!1},{name:"填空",check:!1},{name:"简答",check:!1},{name:"必做",check:!1}]},{name:"难度",id:3,items:[{name:"基础",check:!1},{name:"中等",check:!1},{name:"困难",check:!1}]}],typeDataCopy:[],attainment:[],ability:[],knowledge:[]}},mounted(){let e=this;e.$bus.on("CancelPaperSelect",(t=>{e.clear()}))},methods:{getPaperEntities(){let e=this,t=sessionStorage.getItem("paperfilter-type-"+e.paperId),a=sessionStorage.getItem("paperfilter-attainment-"+e.paperId),i=sessionStorage.getItem("paperfilter-ability-"+e.paperId),s=sessionStorage.getItem("paperfilter-knowledge-"+e.paperId);(0,n.lF)(t)?e.typeData=[{name:"文字",id:0,items:[{name:"文字",check:!1},{name:"重点",check:!1}]},{name:"文件",id:1,items:[{name:"word",check:!1},{name:"ppt",check:!1},{name:"pdf",check:!1},{name:"音频",check:!1},{name:"视频",check:!1},{name:"必办",check:!1}]},{name:"题",id:2,items:[{name:"单选",check:!1},{name:"不定项",check:!1},{name:"填空",check:!1},{name:"简答",check:!1},{name:"必做",check:!1}]},{name:"难度",id:3,items:[{name:"基础",check:!1},{name:"中等",check:!1},{name:"困难",check:!1}]}]:e.typeData=JSON.parse(t),(0,n.lF)(a)?(0,c.S3)(e.paperId,0).then((t=>{let a=t.extra;a.length>0&&a.forEach((e=>{e.check=!1})),e.$nextTick((()=>{e.attainment=e.sortArr(a)}))})):e.attainment=e.sortArr(JSON.parse(a)),(0,n.lF)(i)?(0,c.S3)(e.paperId,1).then((t=>{let a=t.extra;a.length>0&&a.forEach((e=>{e.check=!1})),e.$nextTick((()=>{e.ability=e.sortArr(a)}))})):e.ability=e.sortArr(JSON.parse(i)),(0,n.lF)(s)?(0,c.S3)(e.paperId,2).then((t=>{let a=t.extra;a.length>0&&a.forEach((e=>{e.check=!1})),e.$nextTick((()=>{e.knowledge=e.sortArr(a)}))})):e.knowledge=e.sortArr(JSON.parse(s))},sortArr(e){let t=e.map((e=>e.libNumber.split(".").length-1)),a=Math.max(...t);return e.sort(((e,t)=>{function i(e){return(0,n.rQ)(e,a).split(".").map(Number)}const s=i(e.libNumber),c=i(t.libNumber);for(let a=0;a<s.length;a++)if(s[a]!==c[a])return s[a]-c[a];return 0})),e},submitData(){let e=this,t=!1,a={paperId:e.paperId,paperText:!1,point:!1,word:!1,ppt:!1,pdf:!1,sounds:!1,video:!1,handle:!1,single:!1,multiSelect:!1,filling:!1,shortAnswer:!1,mustDoing:!1,klIdList:[],difficultyLevel:[]};for(let i=0;i<e.typeData.length;i++)for(let s=0;s<e.typeData[i].items.length;s++)switch(i+""+s){case"00":a.paperText=e.typeData[i].items[s].check,a.paperText&&(t=!0);break;case"01":a.point=e.typeData[i].items[s].check,a.point&&(t=!0);break;case"10":a.word=e.typeData[i].items[s].check,a.word&&(t=!0);break;case"11":a.ppt=e.typeData[i].items[s].check,a.ppt&&(t=!0);break;case"12":a.pdf=e.typeData[i].items[s].check,a.pdf&&(t=!0);break;case"13":a.sounds=e.typeData[i].items[s].check,a.sounds&&(t=!0);break;case"14":a.video=e.typeData[i].items[s].check,a.video&&(t=!0);break;case"15":a.handle=e.typeData[i].items[s].check,a.handle&&(t=!0);break;case"20":a.single=e.typeData[i].items[s].check,a.single&&(t=!0);break;case"21":a.multiSelect=e.typeData[i].items[s].check,a.multiSelect&&(t=!0);break;case"22":a.filling=e.typeData[i].items[s].check,a.filling&&(t=!0);break;case"23":a.shortAnswer=e.typeData[i].items[s].check,a.shortAnswer&&(t=!0);break;case"24":a.mustDoing=e.typeData[i].items[s].check,a.mustDoing&&(t=!0);break;case"30":case"31":case"32":let c="";0==s&&(c=3),1==s&&(c=2),2==s&&(c=1),e.typeData[i].items[s].check&&(a.difficultyLevel.push(c+""),t=!0);break}e.attainment.length>0&&e.attainment.forEach((e=>{e.check&&(a.klIdList.push(e.id),t=!0)})),e.ability.length>0&&e.ability.forEach((e=>{e.check&&(a.klIdList.push(e.id),t=!0)})),e.knowledge.length>0&&e.knowledge.forEach((e=>{e.check&&(a.klIdList.push(e.id),t=!0)})),e.setSessionItem(),t?e.$parent.getPaperFilter(a,t):e.$parent.ChosePaperFilterWin(0)},clear(){let e=this;for(let t=0;t<e.typeData.length;t++)for(let a=0;a<e.typeData[t].items.length;a++)e.typeData[t].items[a].check=!1;e.attainment.length>0&&e.attainment.forEach((e=>{e.check=!1})),e.ability.length>0&&e.ability.forEach((e=>{e.check=!1})),e.knowledge.length>0&&e.knowledge.forEach((e=>{e.check=!1}))},setSessionItem(){let e=this;sessionStorage.setItem("paperfilter-type-"+e.paperId,JSON.stringify(e.typeData)),sessionStorage.setItem("paperfilter-attainment-"+e.paperId,JSON.stringify(e.attainment)),sessionStorage.setItem("paperfilter-ability-"+e.paperId,JSON.stringify(e.ability)),sessionStorage.setItem("paperfilter-knowledge-"+e.paperId,JSON.stringify(e.knowledge))},CutString(e){return(0,n.lF)(e)||e.length<=15?e:e.substring(0,15)+"..."},close(){this.$parent.ChosePaperFilterWin(1)}}},l=r,o=a(70713),p=(0,o.Z)(l,i,s,!1,null,"47f7bb84",null),m=p.exports}}]);