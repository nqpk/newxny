"use strict";(self["webpackChunkstu_project"]=self["webpackChunkstu_project"]||[]).push([[504],{60683:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-C5CCE5 w100 h100 pos-a com-box "},[a("div",{staticClass:"left-box"},[a("div",{staticClass:"title w100 t-c"},[t._v("第"+t._s(t.parentData.questionNumber)+"题")]),a("div",{staticClass:"btn-box"},[a("div",{staticClass:"btn t-c",on:{click:function(e){t.commentsvisible=!0}}},[t._v("题干")]),a("div",{staticClass:"btn t-c",on:{click:function(e){t.answervisible=!0}}},[t._v("答案")]),a("div",{staticClass:"btn t-c",on:{click:t.getQuestionAnalysis}},[t._v("解析")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!(null==t.parentData.attachmentEntityList||0==t.parentData.attachmentEntityList.length),expression:"!(parentData.attachmentEntityList == null || parentData.attachmentEntityList.length == 0)"}]},t._l(t.parentData.attachmentEntityList,(function(e){return a("div",{key:e.id,staticClass:"btn t-c file-btn",on:{click:function(a){return a.stopPropagation(),t.viewFile(e)}}},[a("div",{staticClass:"l-box"},[a("a-icon",{style:{fontSize:"28px",color:t.getIconColor(e.attachmentExtraName),marginRight:"10px"},attrs:{type:t.getFileIcon(e.attachmentExtraName)}})],1),a("div",{staticClass:"r-box"},[t._v(t._s(e.attachmentName))])])})),0)])]),a("div",{staticClass:"center-box con"},[a("div",{staticClass:"title w100 t-c pos-r"},[t._v("讲评 "),a("a-icon",{attrs:{type:"close-circle"},on:{click:t.closebox}})],1),a("div",{ref:"content",staticClass:"content-box",attrs:{id:"data-list-content"}},t._l(t.data,(function(e){return a("div",{key:e.id,staticClass:"left-box1 message-box"},[a("div",{staticClass:"name-box f-l"},[t._v(t._s(t.formatTime(e.createTime))),a("br"),t._v(t._s(t.formatName(e.teacherName)))]),0==e.contentType?a("div",{staticClass:"message br-5  f-l"},[t._v(" "+t._s(e.content)+" ")]):1==e.contentType?a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"img br-5  f-l"},[a("img",{attrs:{src:"/exam"+e.content}})]):2==e.contentType?a("div",{staticClass:"mp3 br-5 f-l",style:{width:t.mp3width(e.duration)+"px"},on:{click:function(a){return t.playSounds(e)}}},[a("span",{staticClass:"mp3-fl f-l"},[a("span",{staticStyle:{width:"16px","margin-top":"7px","margin-left":"5px"}},[a("img",{staticStyle:{width:"16px","margin-top":"6px","margin-left":"5px"},attrs:{src:e.id==t.audio.playid?t.imgsrc2:t.imgsrc1}})]),t._v(" "),a("span",{staticStyle:{position:"relative",top:"5px"}},[t._v(t._s(e.duration)+'"')])])]):3==e.contentType?a("div",{staticClass:"file  br-5  f-l",on:{click:function(a){a.stopPropagation(),t.currPreview=e.attachmentEntityList[0],t.viewFile(e.attachmentEntityList[0])}}},[a("a-icon",{style:{fontSize:"32px",color:t.getIconColor(e.attachmentEntityList[0].attachmentExtraName),marginRight:"10px"},attrs:{type:t.getFileIcon(e.attachmentEntityList[0].attachmentExtraName)}}),a("span",[t._v(t._s(e.content))])],1):t._e()])})),0)]),a("div",{staticClass:"right-box"},[a("div",{staticClass:"r-bottom-box",staticStyle:{"margin-top":"0px"}},[a("div",{staticClass:"title bg-fff c-636F9F w100 t-c mb-5"},[t._v("班级成绩")]),a("div",{staticClass:"r-bottom-b"},[t._v(" "+t._s(t.parentData.questionType>=3?"平均分":"正答率")),a("br"),t._v(" "+t._s(t.StatisticsData.classData)+" ")])]),a("div",{staticClass:"r-bottom-box"},[a("div",{staticClass:"title bg-fff c-636F9F w100 t-c mb-5"},[t._v("历史数据")]),a("div",{staticClass:"r-bottom-b"},[t._v(" 得分率"),a("br"),t._v(" "+t._s(t.StatisticsData.scoringRateHistory)+" ")])])]),a("audio",{staticStyle:{display:"none"},attrs:{src:t.audio.src,id:"audiobf",controlslist:"nodownload",autoplay:""}},[t._v(" 您的浏览器不支持 audio 标签。 ")]),a("a-modal",{attrs:{title:"题干",visible:t.commentsvisible,footer:null,width:"90%"},on:{cancel:function(e){t.commentsvisible=!1}}},[a("p",{domProps:{innerHTML:t._s(t.replaceImg(t.parentData.questionStem))}})]),a("a-modal",{attrs:{title:"答案",visible:t.answervisible,footer:null,width:"90%"},on:{cancel:function(e){t.answervisible=!1}}},[a("p",{domProps:{innerHTML:t._s(t.replaceImg(t.parentData.answer))}})]),a("a-modal",{attrs:{title:"解析",visible:t.modalvisible,footer:null,width:"90%"},on:{cancel:function(e){t.modalvisible=!1}}},[a("div",{staticClass:"c-24469f"},[t._v("【解析】")]),a("p",{staticClass:"pl-10",domProps:{innerHTML:t._s(t.replaceImg(t.parentData.questionAnalysis))}}),a("div",{staticClass:"c-24469f"},[t._v("【追加解析】")]),a("p",{staticClass:"pl-10",domProps:{innerHTML:t._s(t.replaceImg(t.parentData.addToQuestionAnalysis))}})]),a("a-modal",{attrs:{width:870,title:"文件预览",footer:null},on:{cancel:function(e){return t.ChoseShowWin()}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[".pdf"==t.currPreview.attachmentExtraName||".doc"==t.currPreview.attachmentExtraName||".docx"==t.currPreview.attachmentExtraName||".ppt"==t.currPreview.attachmentExtraName||".pptx"==t.currPreview.attachmentExtraName?a("iframe",{staticStyle:{height:"500px","overflow-y":"auto"},attrs:{src:"/exam/pdf/web/viewer.html?file=/exam"+this.currPreview.attachmentLinkAddress,width:"100%",frameborder:"0"}}):".mp3"==t.currPreview.attachmentExtraName?a("iframe",{staticStyle:{height:"500px","overflow-y":"auto"},attrs:{src:"/exam"+t.videoFile,width:"100%",frameborder:"0"}}):".mp4"==t.currPreview.attachmentExtraName||".aiv"==t.currPreview.attachmentExtraName?a("div",[a("video",{ref:"myVideo",staticStyle:{height:"500px","overflow-y":"auto"},attrs:{id:"video",controls:"controls",controlslist:"nodownload",loop:"loop",src:"/exam"+t.videoFile,width:"100%"}}),"pad"==t.source?a("div",{staticStyle:{"text-align":"right"},attrs:{id:"components-dropdown-demo-placement"}},[a("a-dropdown",{attrs:{placement:t.topLeft}},[a("a-button",[t._v("播放倍速")]),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{on:{click:function(e){return t.playbackRate(.75)}}},[t._v(" × 0.75 ")]),a("a-menu-item",{on:{click:function(e){return t.playbackRate(1)}}},[t._v(" × 1 ")]),a("a-menu-item",{on:{click:function(e){return t.playbackRate(1.5)}}},[t._v(" × 1.5 ")]),a("a-menu-item",{on:{click:function(e){return t.playbackRate(2)}}},[t._v(" × 2 ")])],1)],1)],1):t._e()]):[t._v("暂时无法预览")]],2)],1)},n=[],s=a(68354),r=a(52650),c={data(){return{imgsrc1:a(51793),imgsrc2:a(33101),message:"",data:[],audio:{src:"",play:!1,playid:-1},commentsvisible:!1,answervisible:!1,modalvisible:!1,parentData:{},StatisticsData:{},visible:!1,videoFile:"",currPreview:{}}},methods:{getPaperCommenting(t,e){let a=this;a.parentData=t,console.log("========="),console.log(t),(0,r.Gh)({paperId:t.paperId,sourceSecondId:1==e?t.id:t.paperId,sourceSecondType:e}).then((t=>{0==t.code&&(a.data=t.extra),a.getQuestionStatistics()}))},getQuestionStatistics(){(0,r.bR)(this.parentData.paperId,this.parentData.id).then((t=>{console.log("============="),console.log(t),this.StatisticsData=t.extra}))},playSounds(t){let e=this;var a=document.querySelector("#audiobf");e.audio.src=="/exam"+t.content?e.audio.play?(e.audio={play:!1,playid:-1},a.pause()):(e.audio={play:!0,playid:t.id},a.play()):e.audio={src:"/exam"+t.content,play:!0,playid:t.id},a.addEventListener("ended",(function(){e.audio={src:"",play:!1,playid:-1}}),!1)},getQuestionAnalysis(){let t=this;null!=t.questionAnalysis||null!=t.addToQuestionAnalysis?t.modalvisible=!0:t.$message.warning("教师没有添加相应的解析")},viewFile(t){if(this.visible=!0,"undefined"!=typeof t)return this.currPreview.attachmentExtraName=t.attachmentExtraName,".mp3"===this.currPreview.attachmentExtraName||this.currPreview.attachmentExtraName,void(this.videoFile=t.attachmentLinkAddress);this.$nextTick((()=>{".mp3"===this.currPreview.attachmentExtraName&&(this.$refs.myAudio.src=`/exam${this.currPreview.attachmentLinkAddress}`)})),this.videoFile=this.currPreview.attachmentLinkAddress},ChoseShowWin(){this.videoFile="",this.$refs.myAudio.src=""},playbackRate(t){let e=document.getElementById("video");e.playbackRate=t},getFileIcon(t){return(0,s.MR)(t)},getIconColor(t){return(0,s.Nt)(t)},closebox(){this.audio={src:"",play:!1,playid:-1},this.StatisticsData={},this.$parent.CloseCommentBox()},formatTime(t){return(0,s.mr)(t)},formatName(t){return(0,s.KY)(t)},mp3width(t){return(0,s.y$)(t)},replaceImg(t){return null==t||""==t?"":t.replace(/<img/g,"<img style='max-width:100%'")}}},o=c,l=a(70713),u=(0,l.Z)(o,i,n,!1,null,"bd756f38",null),p=u.exports},52650:function(t,e,a){a.d(e,{C0:function(){return s},EP:function(){return d},FY:function(){return w},Gh:function(){return b},KJ:function(){return l},NZ:function(){return n},O2:function(){return c},OX:function(){return g},S3:function(){return P},Y_:function(){return r},Z2:function(){return h},bR:function(){return y},c1:function(){return x},fi:function(){return u},me:function(){return m},nz:function(){return p},oj:function(){return v},qk:function(){return _},r3:function(){return f},w1:function(){return o},xJ:function(){return $}});var i=a(18442);function n(t){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/student/paper/entity/catalog/${t}`}))}function s(t){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/student/paper/entity/${t}`}))}function r(t){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/student/paper/entity/${t}/content`}))}function c(t){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/student/paper/entity/${t}/question`}))}function o(t,e,a){return(0,i.hi)(Object.assign((0,i.aP)("POST"),{url:`${i.jz}/api/student/paper/entity/${t}/question/${e}/attachment/${a}`}))}function l(t,e,a){return(0,i.hi)(Object.assign((0,i.aP)("POST"),{url:`${i.jz}/api/student/paper/entity/${t}/question/${e}/extra/attachment/${a}`}))}function u(t,e,a){return(0,i.hi)(Object.assign((0,i.aP)("PUT"),{url:`${i.jz}/api/student/paper/entity/${t}/question/${e}/extra/attachment/${a}/del`}))}function p(t,e,a){return(0,i.hi)(Object.assign((0,i.aP)("PUT"),{url:`${i.jz}/api/student/paper/entity/${t}/question/${e}/attachment/${a}/del`}))}function d(t){return(0,i.hi)(Object.assign((0,i.aP)("POST",t),{url:`${i.jz}/api/student/paper/entity/${t.paperId}/question/${t.questionId}`}))}function m(t){return(0,i.hi)(Object.assign((0,i.aP)("POST",t),{url:`${i.jz}/api/student/paper/entity/${t.paperId}/submit`}))}function v(t){return(0,i.hi)(Object.assign((0,i.aP)("POST",t),{url:`${i.jz}/api/student/paper/entity/${t.paperId}/resubmit`}))}function h(t){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/student/paper/entity/${t}/statistics`}))}function f(t){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/paper/${t}/handle/share/respond`}))}function b(t){return(0,i.hi)(Object.assign((0,i.aP)("POST",t),{url:`${i.jz}/api/paper/commenting/source/list`}))}function y(t,e){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/paper/statistics/entity/${t}/question/${e}`}))}function g(t){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/paper/statistics/entity/${t}/question`}))}function x(t,e){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/paper/statistics/entity/${t}/question?paperId=${t}&pointId=${e}`}))}function $(t){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/paper/statistics/entity/${t}/student?paperId=${t}`}))}function w(t,e){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/paper/statistics/point/entity/${t}/${e}/top`}))}function P(t,e){return(0,i.hi)(Object.assign((0,i.aP)("GET"),{url:`${i.jz}/api/paper/statistics/entity/${t}/${e}?paperId=${t}&type=${e}`}))}function _(t){return(0,i.hi)(Object.assign((0,i.aP)("POST",t),{url:`${i.jz}/api/student/paper/entity/condition`}))}}}]);